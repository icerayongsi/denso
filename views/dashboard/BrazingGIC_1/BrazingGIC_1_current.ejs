<%- include('BrazingGIC_1_partials/BrazingGIC_1_header') -%>

<%- include('../../partials/navbar_dashboard') -%>

    <!-- MAIN CONTENT -->

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 mt-3">

      <%- include('BrazingGIC_1_partials/BrazingGIC_1_mechine_img')  %> 

      <div class="card card-body margin-5">

        <div
          class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-0 pb-2 mb-3 border-bottom">

          <h3 class="text-uppercase" style="font-weight: 700;">COND NB 1 / current rc Fan </h3>

          <div class="btn-toolbar mb-2 mb-md-0"></div>


        </div>

      <!-- SELECTOR 1 :  CURRENT GAUGE -->

        <div class="container-fluid">
          <div class="row">
             
            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 1</div>
                <div class="card-body">
                  <canvas id="RC-Fan-1-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current1-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 2</div>
                <div class="card-body">
                  <canvas id="RC-Fan-2-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current2-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 3</div>
                <div class="card-body">
                  <canvas id="RC-Fan-3-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current3-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 4</div>
                <div class="card-body">
                  <canvas id="RC-Fan-4-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current4-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 5</div>
                <div class="card-body">
                  <canvas id="RC-Fan-5-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current5-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 6</div>
                <div class="card-body">
                  <canvas id="RC-Fan-6-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current6-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 7</div>
                <div class="card-body">
                  <canvas id="RC-Fan-7-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current7-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 8</div>
                <div class="card-body">
                  <canvas id="RC-Fan-8-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current8-value">0 A</h3>
                </div>
              </div>
            </div>

            <div class="col-lg-1 padding-card-gague" style="width:var(--w-12);">

              <div class="card text-bg-dark mb-3">
                <div class="card-header text-center">RC Fan 9</div>
                <div class="card-body">
                  <canvas id="RC-Fan-9-X" style="width: 100%;height: 100%;"></canvas>
                </div>
                <div class="card-footer">
                  <h3 class="text-center m-0 current9-value">0 A</h3>
                </div>
              </div>
            </div>

          </div>
        </div>

      <!-- END SELECTOR 1 : CURRENT GAUGE -->

      <!-- SELECTOR 2 : CURRENT CHART -->

      <div class="card card-body margin-5 ps-1 pe-1" style="height: calc(var(--main-h) + 9vh);">
        <canvas class="my-4 w-100" id="myChart" style="width: 100%;height: 100%"></canvas>
      </div>

      <!-- END SELECTOR 2 : CURRENT CHART -->

      </div>


    </main>

    <!-- END MAIN CONTENT -->

    <!-- WIP NOTIFY  -->

    <div class="toast align-items-center show position-fixed bottom-0 end-0 text-bg-warning m-2" role="alert"
      aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          (WIP) THIS PAGE WORKING IN PROCESS....
        </div>
      </div>
    </div>

    <!-- END WIP NOTIFY  -->

<script>
      var opts = {

        colorStart: "#6fadcf",
        colorStop: void 0,
        gradientType: 0,
        strokeColor: "#e0e0e0",
        generateGradient: true,
        percentColors: [[0.0, "#a9d70b"], [0.50, "#f9c802"], [1.0, "#ff0000"]],

        pointer: {
          length: 0.8,
          strokeWidth: 0.035,
          iconScale: 1.0,
          color: '#FFF'
        },

        staticLabels: {
          font: "10px sans-serif",
          labels: [0, 2, 4, 6, 8, 10],
          color: "#fff",
          fractionDigits: 0
        },

        staticZones: [
          // {strokeStyle: "#F03E3E", min: 0, max: 200},
          // {strokeStyle: "#FFDD00", min: 200, max: 500},
          { strokeStyle: "#30B32D", min: 0, max: 6 },
          { strokeStyle: "#FFDD00", min: 6, max: 8 },
          { strokeStyle: "#F03E3E", min: 8, max: 10 }
        ],

        renderTicks: {
          divisions: 6,
          divWidth: 1.1,
          divLength: 0.7,
          divColor: "#333333",
          subDivisions: 3,
          subLength: 0.5,
          subWidth: 0.6,
          subColor: "#666666"
        },

        angle: 0,

        lineWidth: 0.44,

        radiusScale: 1.0,

        fontSize: 40,

        limitMax: false,

        limitMin: false,

        highDpiSupport: true

      };

      var RC_Fan_1_X = new Gauge(document.getElementById('RC-Fan-1-X')).setOptions(opts);

      var RC_Fan_2_X = new Gauge(document.getElementById('RC-Fan-2-X')).setOptions(opts);

      var RC_Fan_3_X = new Gauge(document.getElementById('RC-Fan-3-X')).setOptions(opts);

      var RC_Fan_4_X = new Gauge(document.getElementById('RC-Fan-4-X')).setOptions(opts);

      var RC_Fan_5_X = new Gauge(document.getElementById('RC-Fan-5-X')).setOptions(opts);

      var RC_Fan_6_X = new Gauge(document.getElementById('RC-Fan-6-X')).setOptions(opts);

      var RC_Fan_7_X = new Gauge(document.getElementById('RC-Fan-7-X')).setOptions(opts);

      var RC_Fan_8_X = new Gauge(document.getElementById('RC-Fan-8-X')).setOptions(opts);

      var RC_Fan_9_X = new Gauge(document.getElementById('RC-Fan-9-X')).setOptions(opts);

      RC_Fan_1_X.maxValue = 10;

      RC_Fan_2_X.maxValue = 10;

      RC_Fan_3_X.maxValue = 10;

      RC_Fan_4_X.maxValue = 10;

      RC_Fan_5_X.maxValue = 10;

      RC_Fan_6_X.maxValue = 10;

      RC_Fan_7_X.maxValue = 10;

      RC_Fan_8_X.maxValue = 10;

      RC_Fan_9_X.maxValue = 10;

      RC_Fan_1_X.set(getRandomFloat(4, 5, 1));
      $(".current1-value").html(RC_Fan_1_X.value + " A");
      $(".badge-rc-1").html("RC Fan 1<br>" + RC_Fan_1_X.value + " A");

      RC_Fan_2_X.set(getRandomFloat(4, 5, 1));
      $(".current2-value").html(RC_Fan_2_X.value + " A");
      $(".badge-rc-2").html("RC Fan 2<br>" + RC_Fan_2_X.value + " A");

      RC_Fan_3_X.set(getRandomFloat(4, 5, 1));
      $(".current3-value").html(RC_Fan_3_X.value + " A");
      $(".badge-rc-3").html("RC Fan 3<br>" + RC_Fan_3_X.value + " A");

      RC_Fan_4_X.set(getRandomFloat(4, 5, 1));
      $(".current4-value").html(RC_Fan_4_X.value + " A");
      $(".badge-rc-4").html("RC Fan 4<br>" + RC_Fan_4_X.value + " A");

      RC_Fan_5_X.set(getRandomFloat(4, 5, 1));
      $(".current5-value").html(RC_Fan_5_X.value + " A");
      $(".badge-rc-5").html("RC Fan 5<br>" + RC_Fan_5_X.value + " A");

      RC_Fan_6_X.set(getRandomFloat(4, 5, 1));
      $(".current6-value").html(RC_Fan_6_X.value + " A");
      $(".badge-rc-6").html("RC Fan 6<br>" + RC_Fan_6_X.value + " A");

      RC_Fan_7_X.set(getRandomFloat(4, 5, 1));
      $(".current7-value").html(RC_Fan_7_X.value + " A");
      $(".badge-rc-7").html("RC Fan 7<br>" + RC_Fan_7_X.value + " A");

      RC_Fan_8_X.set(getRandomFloat(4, 5, 1));
      $(".current8-value").html(RC_Fan_8_X.value + " A");
      $(".badge-rc-8").html("RC Fan 8<br>" + RC_Fan_8_X.value + " A");

      RC_Fan_9_X.set(getRandomFloat(4, 5, 1));
      $(".current9-value").html(RC_Fan_9_X.value + " A");
      $(".badge-rc-9").html("RC Fan 9<br>" + RC_Fan_9_X.value + " A");


      setInterval(() => {
        RC_Fan_1_X.set(getRandomFloat(4, 5, 1));
        $(".current1-value").html(RC_Fan_1_X.value + " A");
        $(".badge-rc-1").html("RC Fan 1<br>" + RC_Fan_1_X.value + " A");

        RC_Fan_2_X.set(getRandomFloat(4, 5, 1));
        $(".current2-value").html(RC_Fan_2_X.value + " A");
        $(".badge-rc-2").html("RC Fan 2<br>" + RC_Fan_2_X.value + " A");

        RC_Fan_3_X.set(getRandomFloat(4, 5, 1));
        $(".current3-value").html(RC_Fan_3_X.value + " A");
        $(".badge-rc-3").html("RC Fan 3<br>" + RC_Fan_3_X.value + " A");

        RC_Fan_4_X.set(getRandomFloat(4, 5, 1));
        $(".current4-value").html(RC_Fan_4_X.value + " A");
        $(".badge-rc-4").html("RC Fan 4<br>" + RC_Fan_4_X.value + " A");

        RC_Fan_5_X.set(getRandomFloat(4, 5, 1));
        $(".current5-value").html(RC_Fan_5_X.value + " A");
        $(".badge-rc-5").html("RC Fan 5<br>" + RC_Fan_5_X.value + " A");

        RC_Fan_6_X.set(getRandomFloat(4, 5, 1));
        $(".current6-value").html(RC_Fan_6_X.value + " A");
        $(".badge-rc-6").html("RC Fan 6<br>" + RC_Fan_6_X.value + " A");

        RC_Fan_7_X.set(getRandomFloat(4, 5, 1));
        $(".current7-value").html(RC_Fan_7_X.value + " A");
        $(".badge-rc-7").html("RC Fan 7<br>" + RC_Fan_7_X.value + " A");

        RC_Fan_8_X.set(getRandomFloat(4, 5, 1));
        $(".current8-value").html(RC_Fan_8_X.value + " A");
        $(".badge-rc-8").html("RC Fan 8<br>" + RC_Fan_8_X.value + " A");

        RC_Fan_9_X.set(getRandomFloat(4, 5, 1));
        $(".current9-value").html(RC_Fan_9_X.value + " A");
        $(".badge-rc-9").html("RC Fan 9<br>" + RC_Fan_9_X.value + " A");


      }, 3000)

</script>

<script>
  const ctx = document.getElementById('myChart');

const chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: [],
    datasets: [{
      label: 'X-Axis',
      data: [],
      lineTension: 0,
      backgroundColor: 'transparent',
      borderColor: '#177D94',
      borderWidth: 4,
      pointBackgroundColor: '#177D94'
    },
    {
      label: 'Z-Axis',
      data: [],
      lineTension: 0,
      backgroundColor: 'transparent',
      borderColor: '#28BEE0',
      borderWidth: 4,
      pointBackgroundColor: '#28BEE0'
    }
    ]
  },
  options: {
    legend: {
      display: false,
      labels: {
        fontColor: 'rgb(255, 99, 132)'
      }
    },
    scales: {
      y: {
        ticks: {
          color: '#ADB5BD',
          beginAtZero: false
        }
      },
      x: {
        ticks: {
          color: '#ADB5BD',
          beginAtZero: false
        },
        min: 0,
        max: 30,
      },

    },

    responsive: true,
    // plugins: {
    //   annotation: {
    //     annotations: [
    //       {
    //         type: 'line',
    //         scaleID: 'y',
    //         value: 15,
    //         borderColor: 'rgb(255, 65, 65)',
    //         label: {
    //           enabled: true, 
    //           content: 'Alarm',
    //           borderWidth: 2,
    //           borderColor: 'transparent',
    //           position: 'end',
    //         }
    //       },
    //       {
    //         type: 'line',
    //         scaleID: 'y',
    //         value: 6,
    //         borderColor: 'rgb(255, 192, 65)',
    //         label: { 
    //           enabled: true, 
    //           content: 'Warning',
    //           borderWidth: 2,
    //           borderColor: 'transparent',
    //           position: 'end',
    //         }
    //       }
    //     ]
    //   }
    // }
  }

})


</script>